(this.webpackJsonpinturn_chome_extension=this.webpackJsonpinturn_chome_extension||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},15:function(e,t,n){e.exports=n(26)},20:function(e,t,n){},23:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(3),c=n.n(o),s=(n(20),n(2)),u=n.n(s),i=n(6),l=n(7),p=n(8),f=n(13),d=n(9),h=n(4),m=n(12),w=n(10);n(22),n(23);function v(e){var t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={active:!0,currentWindow:!0},n.abrupt("return",new Promise((function(n){chrome.tabs.query(t,(function(t){var r=t[0].id;chrome.tabs.sendMessage(r,e,n)}))})));case 2:case"end":return n.stop()}}))}function g(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return chrome.identity.getAuthToken({interactive:!0},e)})));case 1:case"end":return e.stop()}}))}function b(){var e,t;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.a.awrap(g());case 2:if(e=n.sent){n.next=6;break}return alert("Already logged out!"),n.abrupt("return");case 6:return n.next=8,u.a.awrap(window.fetch("https://accounts.google.com/o/oauth2/revoke?token=".concat(e)));case 8:return t=n.sent,n.t0=console,n.next=12,u.a.awrap(t.text());case 12:return n.t1=n.sent,n.t0.log.call(n.t0,n.t1),n.abrupt("return",new Promise((function(t){return chrome.identity.removeCachedAuthToken({token:e},t)})));case 15:case"end":return n.stop()}}))}function y(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new XMLHttpRequest,t.t0=e,t.t1="https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=",t.next=5,u.a.awrap(g());case 5:return t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),t.t0.open.call(t.t0,"GET",t.t3),t.abrupt("return",new Promise((function(t){e.onload=function(){return t(JSON.parse(e.response))},e.send()})));case 9:case"end":return t.stop()}}))}var x,k,E,O=n(1),j=n(14),_=n(11),I=n.n(_),N=Object(j.a)((k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=Object(f.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a))),Object(i.a)(n,"userInfo",E,Object(h.a)(n)),n.login=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(y());case 2:e=t.sent,Object(O.l)((function(){return n.userInfo=e}));case 4:case"end":return t.stop()}}))},n.logout=function(){return u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.awrap(b());case 2:window.close();case 3:case"end":return e.stop()}}))},n.apply=function(){var e,t,r;return u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=Object(h.a)(n),t=e.userInfo){a.next=3;break}return a.abrupt("return",alert("This session is not associated with a valid user. Please retry authentication."));case 3:return r=t.email,a.next=6,u.a.awrap(v({action:"__logApplicationEntry",user:r}));case 6:return a.next=8,u.a.awrap(v({action:"__openEmbeddedBoards",user:r}));case 8:!1===a.sent&&alert("No embedded greenhouse.io content was found.");case 10:case"end":return a.stop()}}))},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.login()}},{key:"render",value:function(){return this.userInfo?a.a.createElement("div",{className:"App"},this.renderUserHeader,a.a.createElement("header",{className:"App-header"},a.a.createElement("p",{className:"greenhouse-prompt",onClick:this.apply},"Capture and begin application!")),a.a.createElement("span",{className:"log-out",onClick:this.logout},"Log Out")):a.a.createElement("div",{style:{background:"url(".concat(I.a,")"),margin:50}})}},{key:"renderUserHeader",get:function(){if(!this.userInfo)return null;var e=this.userInfo,t=e.email,n=e.picture;return a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{className:"user-icon",src:n}),a.a.createElement("span",{className:"email"},t))}}]),t}(a.a.Component),E=Object(w.a)(k.prototype,"userInfo",[O.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=k))||x;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.ad803772.chunk.js.map